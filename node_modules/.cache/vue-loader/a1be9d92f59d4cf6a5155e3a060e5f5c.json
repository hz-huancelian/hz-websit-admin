{"remainingRequest":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\webstormProjects\\hz-websit-admin\\src\\components\\Tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\webstormProjects\\hz-websit-admin\\src\\components\\Tinymce\\index.vue","mtime":1630903546000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qKgogKiBkb2NzOgogKiBodHRwczovL3BhbmppYWNoZW4uZ2l0aHViLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvZmVhdHVyZS9jb21wb25lbnQvcmljaC1lZGl0b3IuaHRtbCN0aW55bWNlCiAqLwppbXBvcnQgZWRpdG9ySW1hZ2UgZnJvbSAnLi9jb21wb25lbnRzL0VkaXRvckltYWdlJwppbXBvcnQgcGx1Z2lucyBmcm9tICcuL3BsdWdpbnMnCmltcG9ydCB0b29sYmFyIGZyb20gJy4vdG9vbGJhcicKaW1wb3J0IGxvYWQgZnJvbSAnLi9keW5hbWljTG9hZFNjcmlwdCcKCi8vIHdoeSB1c2UgdGhpcyBjZG4sIGRldGFpbCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdGlueW1jZS1hbGwtaW4tb25lCmNvbnN0IHRpbnltY2VDRE4gPSAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS90aW55bWNlLWFsbC1pbi1vbmVANC45LjMvdGlueW1jZS5taW4uanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RpbnltY2UnLAogIGNvbXBvbmVudHM6IHsgZWRpdG9ySW1hZ2UgfSwKICBwcm9wczogewogICAgaWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gJ3Z1ZS10aW55bWNlLScgKyArbmV3IERhdGUoKSArICgoTWF0aC5yYW5kb20oKSAqIDEwMDApLnRvRml4ZWQoMCkgKyAnJykKICAgICAgfQogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICB0b29sYmFyOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdCiAgICAgIH0KICAgIH0sCiAgICBtZW51YmFyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ZpbGUgZWRpdCBpbnNlcnQgdmlldyBmb3JtYXQgdGFibGUnCiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogMzYwCiAgICB9LAogICAgd2lkdGg6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiAnYXV0bycKICAgIH0sCiAgICBjaGFuZ2VWYWw6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGhhc0NoYW5nZTogZmFsc2UsCiAgICAgIGhhc0luaXQ6IGZhbHNlLAogICAgICB0aW55bWNlSWQ6IHRoaXMuaWQsCiAgICAgIGZ1bGxzY3JlZW46IGZhbHNlLAogICAgICBsYW5ndWFnZVR5cGVMaXN0OiB7CiAgICAgICAgJ2VuJzogJ2VuJywKICAgICAgICAnemgnOiAnemhfQ04nLAogICAgICAgICdlcyc6ICdlc19NWCcsCiAgICAgICAgJ2phJzogJ2phJwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY29udGFpbmVyV2lkdGgoKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aWR0aAogICAgICBpZiAoL15bXGRdKyhcLltcZF0rKT8kLy50ZXN0KHdpZHRoKSkgeyAvLyBtYXRjaGVzIGAxMDBgLCBgJzEwMCdgCiAgICAgICAgcmV0dXJuIGAke3dpZHRofXB4YAogICAgICB9CiAgICAgIHJldHVybiB3aWR0aAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKHZhbCkgewogICAgICBkZWJ1Z2dlcgogICAgICBpZiAoKHRoaXMuY2hhbmdlVmFsIHx8ICF0aGlzLmhhc0NoYW5nZSkgJiYgdGhpcy5oYXNJbml0KSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4KICAgICAgICAgIHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuc2V0Q29udGVudCh2YWwgfHwgJycpKQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCkKICB9LAogIGFjdGl2YXRlZCgpIHsKICAgIGlmICh3aW5kb3cudGlueW1jZSkgewogICAgICB0aGlzLmluaXRUaW55bWNlKCkKICAgIH0KICB9LAogIGRlYWN0aXZhdGVkKCkgewogICAgdGhpcy5kZXN0cm95VGlueW1jZSgpCiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLmRlc3Ryb3lUaW55bWNlKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIC8vIGR5bmFtaWMgbG9hZCB0aW55bWNlIGZyb20gY2RuCiAgICAgIGxvYWQodGlueW1jZUNETiwgKGVycikgPT4gewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyLm1lc3NhZ2UpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgdGhpcy5pbml0VGlueW1jZSgpCiAgICAgIH0pCiAgICB9LAogICAgaW5pdFRpbnltY2UoKSB7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICB3aW5kb3cudGlueW1jZS5pbml0KHsKICAgICAgICBzZWxlY3RvcjogYCMke3RoaXMudGlueW1jZUlkfWAsCiAgICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2VUeXBlTGlzdFsnZW4nXSwKICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LAogICAgICAgIGJvZHlfY2xhc3M6ICdwYW5lbC1ib2R5ICcsCiAgICAgICAgb2JqZWN0X3Jlc2l6aW5nOiBmYWxzZSwKICAgICAgICB0b29sYmFyOiB0aGlzLnRvb2xiYXIubGVuZ3RoID4gMCA/IHRoaXMudG9vbGJhciA6IHRvb2xiYXIsCiAgICAgICAgbWVudWJhcjogdGhpcy5tZW51YmFyLAogICAgICAgIHBsdWdpbnM6IHBsdWdpbnMsCiAgICAgICAgZW5kX2NvbnRhaW5lcl9vbl9lbXB0eV9ibG9jazogdHJ1ZSwKICAgICAgICBwb3dlcnBhc3RlX3dvcmRfaW1wb3J0OiAnY2xlYW4nLAogICAgICAgIGNvZGVfZGlhbG9nX2hlaWdodDogNDUwLAogICAgICAgIGNvZGVfZGlhbG9nX3dpZHRoOiAxMDAwLAogICAgICAgIGFkdmxpc3RfYnVsbGV0X3N0eWxlczogJ3NxdWFyZScsCiAgICAgICAgYWR2bGlzdF9udW1iZXJfc3R5bGVzOiAnZGVmYXVsdCcsCiAgICAgICAgaW1hZ2V0b29sc19jb3JzX2hvc3RzOiBbJ3d3dy50aW55bWNlLmNvbScsICdjb2RlcGVuLmlvJ10sCiAgICAgICAgZGVmYXVsdF9saW5rX3RhcmdldDogJ19ibGFuaycsCiAgICAgICAgbGlua190aXRsZTogZmFsc2UsCiAgICAgICAgbm9uYnJlYWtpbmdfZm9yY2VfdGFiOiB0cnVlLCAvLyBpbnNlcnRpbmcgbm9uYnJlYWtpbmcgc3BhY2UgJm5ic3A7IG5lZWQgTm9uYnJlYWtpbmcgU3BhY2UgUGx1Z2luCiAgICAgICAgaW5pdF9pbnN0YW5jZV9jYWxsYmFjazogZWRpdG9yID0+IHsKICAgICAgICAgIGlmIChfdGhpcy52YWx1ZSkgewogICAgICAgICAgICBlZGl0b3Iuc2V0Q29udGVudChfdGhpcy52YWx1ZSkKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzLmhhc0luaXQgPSB0cnVlCiAgICAgICAgICBlZGl0b3Iub24oJ05vZGVDaGFuZ2UgQ2hhbmdlIEtleVVwIFNldENvbnRlbnQnLCAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlID0gdHJ1ZQogICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGVkaXRvci5nZXRDb250ZW50KCkpCiAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2V0dXAoZWRpdG9yKSB7CiAgICAgICAgICBlZGl0b3Iub24oJ0Z1bGxzY3JlZW5TdGF0ZUNoYW5nZWQnLCAoZSkgPT4gewogICAgICAgICAgICBfdGhpcy5mdWxsc2NyZWVuID0gZS5zdGF0ZQogICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIGl0IHdpbGwgdHJ5IHRvIGtlZXAgdGhlc2UgVVJMcyBpbnRhY3QKICAgICAgICAvLyBodHRwczovL3d3dy50aW55LmNsb3VkL2RvY3MtM3gvcmVmZXJlbmNlL2NvbmZpZ3VyYXRpb24vQ29uZmlndXJhdGlvbjN4QGNvbnZlcnRfdXJscy8KICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81MTk2MjA1L2Rpc2FibGUtdGlueW1jZS1hYnNvbHV0ZS10by1yZWxhdGl2ZS11cmwtY29udmVyc2lvbnMKICAgICAgICBjb252ZXJ0X3VybHM6IGZhbHNlCiAgICAgICAgLy8g5pW05ZCI5LiD54mb5LiK5LygCiAgICAgICAgLy8gaW1hZ2VzX2RhdGFpbWdfZmlsdGVyKGltZykgewogICAgICAgIC8vICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgLy8gICAgIGNvbnN0ICRpbWFnZSA9ICQoaW1nKTsKICAgICAgICAvLyAgICAgJGltYWdlLnJlbW92ZUF0dHIoJ3dpZHRoJyk7CiAgICAgICAgLy8gICAgICRpbWFnZS5yZW1vdmVBdHRyKCdoZWlnaHQnKTsKICAgICAgICAvLyAgICAgaWYgKCRpbWFnZVswXS5oZWlnaHQgJiYgJGltYWdlWzBdLndpZHRoKSB7CiAgICAgICAgLy8gICAgICAgJGltYWdlLmF0dHIoJ2RhdGEtd3NjbnR5cGUnLCAnaW1hZ2UnKTsKICAgICAgICAvLyAgICAgICAkaW1hZ2UuYXR0cignZGF0YS13c2NuaCcsICRpbWFnZVswXS5oZWlnaHQpOwogICAgICAgIC8vICAgICAgICRpbWFnZS5hdHRyKCdkYXRhLXdzY253JywgJGltYWdlWzBdLndpZHRoKTsKICAgICAgICAvLyAgICAgICAkaW1hZ2UuYWRkQ2xhc3MoJ3dzY25waCcpOwogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gICB9LCAwKTsKICAgICAgICAvLyAgIHJldHVybiBpbWcKICAgICAgICAvLyB9LAogICAgICAgIC8vIGltYWdlc191cGxvYWRfaGFuZGxlcihibG9iSW5mbywgc3VjY2VzcywgZmFpbHVyZSwgcHJvZ3Jlc3MpIHsKICAgICAgICAvLyAgIHByb2dyZXNzKDApOwogICAgICAgIC8vICAgY29uc3QgdG9rZW4gPSBfdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbjsKICAgICAgICAvLyAgIGdldFRva2VuKHRva2VuKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAvLyAgICAgY29uc3QgdXJsID0gcmVzcG9uc2UuZGF0YS5xaW5pdV91cmw7CiAgICAgICAgLy8gICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgndG9rZW4nLCByZXNwb25zZS5kYXRhLnFpbml1X3Rva2VuKTsKICAgICAgICAvLyAgICAgZm9ybURhdGEuYXBwZW5kKCdrZXknLCByZXNwb25zZS5kYXRhLnFpbml1X2tleSk7CiAgICAgICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2JJbmZvLmJsb2IoKSwgdXJsKTsKICAgICAgICAvLyAgICAgdXBsb2FkKGZvcm1EYXRhKS50aGVuKCgpID0+IHsKICAgICAgICAvLyAgICAgICBzdWNjZXNzKHVybCk7CiAgICAgICAgLy8gICAgICAgcHJvZ3Jlc3MoMTAwKTsKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgLy8gICAgIGZhaWx1cmUoJ+WHuueOsOacquefpemXrumimO+8jOWIt+aWsOmhtemdou+8jOaIluiAheiBlOezu+eoi+W6j+WRmCcpCiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgLy8gICB9KTsKICAgICAgICAvLyB9LAogICAgICB9KQogICAgfSwKICAgIGRlc3Ryb3lUaW55bWNlKCkgewogICAgICBjb25zdCB0aW55bWNlID0gd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKQogICAgICBpZiAodGhpcy5mdWxsc2NyZWVuKSB7CiAgICAgICAgdGlueW1jZS5leGVjQ29tbWFuZCgnbWNlRnVsbFNjcmVlbicpCiAgICAgIH0KCiAgICAgIGlmICh0aW55bWNlKSB7CiAgICAgICAgdGlueW1jZS5kZXN0cm95KCkKICAgICAgfQogICAgfSwKICAgIHNldENvbnRlbnQodmFsdWUpIHsKICAgICAgd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKS5zZXRDb250ZW50KHZhbHVlKQogICAgfSwKICAgIGdldENvbnRlbnQoKSB7CiAgICAgIHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuZ2V0Q29udGVudCgpCiAgICB9LAogICAgaW1hZ2VTdWNjZXNzQ0JLKGFycikgewogICAgICBhcnIuZm9yRWFjaCh2ID0+IHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuaW5zZXJ0Q29udGVudChgPGltZyBjbGFzcz0id3NjbnBoIiBzcmM9IiR7di51cmx9IiA+YCkpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Tinymce","sourcesContent":["<template>\n  <div :class=\"{fullscreen:fullscreen}\" class=\"tinymce-container\" :style=\"{width:containerWidth}\">\n    <textarea :id=\"tinymceId\" class=\"tinymce-textarea\" />\n    <div class=\"editor-custom-btn-container\">\n      <editorImage color=\"#1890ff\" class=\"editor-upload-btn\" @successCBK=\"imageSuccessCBK\" />\n    </div>\n  </div>\n</template>\n\n<script>\n/**\n * docs:\n * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\n */\nimport editorImage from './components/EditorImage'\nimport plugins from './plugins'\nimport toolbar from './toolbar'\nimport load from './dynamicLoadScript'\n\n// why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\nconst tinymceCDN = 'https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js'\n\nexport default {\n  name: 'Tinymce',\n  components: { editorImage },\n  props: {\n    id: {\n      type: String,\n      default: function() {\n        return 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\n      }\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    toolbar: {\n      type: Array,\n      required: false,\n      default() {\n        return []\n      }\n    },\n    menubar: {\n      type: String,\n      default: 'file edit insert view format table'\n    },\n    height: {\n      type: [Number, String],\n      required: false,\n      default: 360\n    },\n    width: {\n      type: [Number, String],\n      required: false,\n      default: 'auto'\n    },\n    changeVal: {\n      type: Boolean,\n      default() {\n        return false\n      }\n    }\n  },\n  data() {\n    return {\n      hasChange: false,\n      hasInit: false,\n      tinymceId: this.id,\n      fullscreen: false,\n      languageTypeList: {\n        'en': 'en',\n        'zh': 'zh_CN',\n        'es': 'es_MX',\n        'ja': 'ja'\n      }\n    }\n  },\n  computed: {\n    containerWidth() {\n      const width = this.width\n      if (/^[\\d]+(\\.[\\d]+)?$/.test(width)) { // matches `100`, `'100'`\n        return `${width}px`\n      }\n      return width\n    }\n  },\n  watch: {\n    value(val) {\n      debugger\n      if ((this.changeVal || !this.hasChange) && this.hasInit) {\n        this.$nextTick(() =>\n          window.tinymce.get(this.tinymceId).setContent(val || ''))\n      }\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  activated() {\n    if (window.tinymce) {\n      this.initTinymce()\n    }\n  },\n  deactivated() {\n    this.destroyTinymce()\n  },\n  destroyed() {\n    this.destroyTinymce()\n  },\n  methods: {\n    init() {\n      // dynamic load tinymce from cdn\n      load(tinymceCDN, (err) => {\n        if (err) {\n          this.$message.error(err.message)\n          return\n        }\n        this.initTinymce()\n      })\n    },\n    initTinymce() {\n      const _this = this\n      window.tinymce.init({\n        selector: `#${this.tinymceId}`,\n        language: this.languageTypeList['en'],\n        height: this.height,\n        body_class: 'panel-body ',\n        object_resizing: false,\n        toolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\n        menubar: this.menubar,\n        plugins: plugins,\n        end_container_on_empty_block: true,\n        powerpaste_word_import: 'clean',\n        code_dialog_height: 450,\n        code_dialog_width: 1000,\n        advlist_bullet_styles: 'square',\n        advlist_number_styles: 'default',\n        imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\n        default_link_target: '_blank',\n        link_title: false,\n        nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\n        init_instance_callback: editor => {\n          if (_this.value) {\n            editor.setContent(_this.value)\n          }\n          _this.hasInit = true\n          editor.on('NodeChange Change KeyUp SetContent', () => {\n            this.hasChange = true\n            this.$emit('input', editor.getContent())\n          })\n        },\n        setup(editor) {\n          editor.on('FullscreenStateChanged', (e) => {\n            _this.fullscreen = e.state\n          })\n        },\n        // it will try to keep these URLs intact\n        // https://www.tiny.cloud/docs-3x/reference/configuration/Configuration3x@convert_urls/\n        // https://stackoverflow.com/questions/5196205/disable-tinymce-absolute-to-relative-url-conversions\n        convert_urls: false\n        // 整合七牛上传\n        // images_dataimg_filter(img) {\n        //   setTimeout(() => {\n        //     const $image = $(img);\n        //     $image.removeAttr('width');\n        //     $image.removeAttr('height');\n        //     if ($image[0].height && $image[0].width) {\n        //       $image.attr('data-wscntype', 'image');\n        //       $image.attr('data-wscnh', $image[0].height);\n        //       $image.attr('data-wscnw', $image[0].width);\n        //       $image.addClass('wscnph');\n        //     }\n        //   }, 0);\n        //   return img\n        // },\n        // images_upload_handler(blobInfo, success, failure, progress) {\n        //   progress(0);\n        //   const token = _this.$store.getters.token;\n        //   getToken(token).then(response => {\n        //     const url = response.data.qiniu_url;\n        //     const formData = new FormData();\n        //     formData.append('token', response.data.qiniu_token);\n        //     formData.append('key', response.data.qiniu_key);\n        //     formData.append('file', blobInfo.blob(), url);\n        //     upload(formData).then(() => {\n        //       success(url);\n        //       progress(100);\n        //     })\n        //   }).catch(err => {\n        //     failure('出现未知问题，刷新页面，或者联系程序员')\n        //     console.log(err);\n        //   });\n        // },\n      })\n    },\n    destroyTinymce() {\n      const tinymce = window.tinymce.get(this.tinymceId)\n      if (this.fullscreen) {\n        tinymce.execCommand('mceFullScreen')\n      }\n\n      if (tinymce) {\n        tinymce.destroy()\n      }\n    },\n    setContent(value) {\n      window.tinymce.get(this.tinymceId).setContent(value)\n    },\n    getContent() {\n      window.tinymce.get(this.tinymceId).getContent()\n    },\n    imageSuccessCBK(arr) {\n      arr.forEach(v => window.tinymce.get(this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.tinymce-container {\n  position: relative;\n  line-height: normal;\n}\n\n.tinymce-container {\n  ::v-deep {\n    .mce-fullscreen {\n      z-index: 10000;\n    }\n  }\n}\n\n.tinymce-textarea {\n  visibility: hidden;\n  z-index: -1;\n}\n\n.editor-custom-btn-container {\n  position: absolute;\n  right: 4px;\n  top: 4px;\n  /*z-index: 2005;*/\n}\n\n.fullscreen .editor-custom-btn-container {\n  z-index: 10000;\n  position: fixed;\n}\n\n.editor-upload-btn {\n  display: inline-block;\n}\n</style>\n"]}]}