{"remainingRequest":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\babel-loader\\lib\\index.js!F:\\webstormProjects\\hz-websit-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\webstormProjects\\hz-websit-admin\\src\\utils\\request.js","dependencies":[{"path":"F:\\webstormProjects\\hz-websit-admin\\src\\utils\\request.js","mtime":1629787280000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\webstormProjects\\hz-websit-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJGOi93ZWJzdG9ybVByb2plY3RzL2h6LXdlYnNpdC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKdmFyIF9heGlvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiYXhpb3MiKSk7Cgp2YXIgX2VsZW1lbnRVaSA9IHJlcXVpcmUoImVsZW1lbnQtdWkiKTsKCnZhciBfc3RvcmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvc3RvcmUiKSk7Cgp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKCi8vIOWIm+W7ukF4aW9z5a6e5L6LCnZhciBzZXJ2aWNlID0gX2F4aW9zLmRlZmF1bHQuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIHRpbWVvdXQ6IDUwMDAKfSk7CgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gRG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKICBjb25maWcuaGVhZGVyc1snWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0JzsKICBjb25maWcuaGVhZGVyc1snQ2FjaGUtQ29udHJvbCddID0gJ25vLWNhY2hlJzsgLy8g6Kej5YazIOexu+S8vDM2MOa1j+iniOWZqEFqYXjnvJPlrZjpl67popgKCiAgY29uZmlnLmhlYWRlcnMuUHJhZ21hID0gJ25vLWNhY2hlJzsKCiAgaWYgKF9zdG9yZS5kZWZhdWx0LmdldHRlcnMudG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAoMCwgX2F1dGguZ2V0VG9rZW4pKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvLyBEbyBzb21ldGhpbmcgYmVmb3JlIHJlc3BvbnNlIGlzIHNlbnQKICB2YXIgaGVhZGVycyA9IHJlc3BvbnNlLmhlYWRlcnM7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChoZWFkZXJzLmF1dGhvcml6YXRpb24gJiYgaGVhZGVycy5hdXRob3JpemF0aW9uLmxlbmd0aCA+IDApIHsKICAgIF9zdG9yZS5kZWZhdWx0LmRpc3BhdGNoKCd1c2VyL3JlbG9hZFRva2VuJywgaGVhZGVycy5hdXRob3JpemF0aW9uKTsKICB9CgogIGlmIChyZXMuY29kZSAhPT0gMjAwKSB7CiAgICBfZWxlbWVudFVpLk5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgIHRpdGxlOiAn5pyN5Yqh6K+35rGC5byC5bi4JywKICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJwogICAgfSk7CgogICAgaWYgKHJlcy5jb2RlID09PSA0MDEgfHwgcmVzLmNvZGUgPT09IDQwMykgewogICAgICBfZWxlbWVudFVpLk1lc3NhZ2VCb3guY29uZmlybSgn5L2g5bey6KKr55m75Ye677yM5Y+v5Lul5Y+W5raI57un57ut55WZ5Zyo6K+l6aG16Z2i77yM5oiW6ICF6YeN5paw55m75b2VJywgJ+ehruWumueZu+WHuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF9zdG9yZS5kZWZhdWx0LmRpc3BhdGNoKCd1c2VyL3Jlc2V0VG9rZW4nKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocmVzLm1lc3NhZ2UgfHwgJ0Vycm9yJykpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgX2VsZW1lbnRVaS5Ob3RpZmljYXRpb24uZXJyb3IoewogICAgdGl0bGU6ICfmnI3liqHor7fmsYLlvILluLgnLAogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnRXJyb3InCiAgfSk7CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwp2YXIgX2RlZmF1bHQgPSBzZXJ2aWNlOwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"sources":["F:/webstormProjects/hz-websit-admin/src/utils/request.js"],"names":["service","axios","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","headers","Pragma","store","getters","token","Authorization","error","Promise","reject","response","res","data","authorization","length","dispatch","code","Notification","title","message","MessageBox","confirm","confirmButtonText","cancelButtonText","type","then","location","reload","Error"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;AACA,IAAMA,OAAO,GAAGC,eAAMC,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AAE3BC,EAAAA,OAAO,EAAE;AAFkB,CAAb,CAAhB;;AAKAP,OAAO,CAACQ,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AAC3C;AACEA,EAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkC,UAAlC,CAHyC,CAGI;;AAC7CD,EAAAA,MAAM,CAACC,OAAP,CAAeC,MAAf,GAAwB,UAAxB;;AACA,MAAIC,eAAMC,OAAN,CAAcC,KAAlB,EAAyB;AACvBL,IAAAA,MAAM,CAACC,OAAP,CAAeK,aAAf,GAA+B,qBAA/B;AACD;;AACD,SAAON,MAAP;AACD,CATD,EASG,UAAAO,KAAK,EAAI;AACZ;AACE,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAZD;AAcAlB,OAAO,CAACQ,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CAAkC,UAAAW,QAAQ,EAAI;AAC5C;AACA,MAAMT,OAAO,GAAGS,QAAQ,CAACT,OAAzB;AACA,MAAMU,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MAAIX,OAAO,CAACY,aAAR,IAAyBZ,OAAO,CAACY,aAAR,CAAsBC,MAAtB,GAA+B,CAA5D,EAA+D;AAC7DX,mBAAMY,QAAN,CAAe,kBAAf,EAAmCd,OAAO,CAACY,aAA3C;AACD;;AACD,MAAIF,GAAG,CAACK,IAAJ,KAAa,GAAjB,EAAsB;AACpBC,4BAAaV,KAAb,CAAmB;AACjBW,MAAAA,KAAK,EAAE,QADU;AAEjBC,MAAAA,OAAO,EAAER,GAAG,CAACQ,OAAJ,IAAe;AAFP,KAAnB;;AAIA,QAAIR,GAAG,CAACK,IAAJ,KAAa,GAAb,IAAoBL,GAAG,CAACK,IAAJ,KAAa,GAArC,EAA0C;AACxCI,4BAAWC,OAAX,CAAmB,0BAAnB,EAA+C,MAA/C,EAAuD;AACrDC,QAAAA,iBAAiB,EAAE,MADkC;AAErDC,QAAAA,gBAAgB,EAAE,IAFmC;AAGrDC,QAAAA,IAAI,EAAE;AAH+C,OAAvD,EAIGC,IAJH,CAIQ,YAAM;AACZtB,uBAAMY,QAAN,CAAe,iBAAf,EAAkCU,IAAlC,CAAuC,YAAM;AAC3CC,UAAAA,QAAQ,CAACC,MAAT;AACD,SAFD;AAGD,OARD;AASD,KAVD,MAUO;AACL,aAAOnB,OAAO,CAACC,MAAR,CAAe,IAAImB,KAAJ,CAAUjB,GAAG,CAACQ,OAAJ,IAAe,OAAzB,CAAf,CAAP;AACD;AACF;;AACD,SAAOR,GAAP;AACD,CA3BD,EA2BG,UAAAJ,KAAK,EAAI;AACVU,0BAAaV,KAAb,CAAmB;AACjBW,IAAAA,KAAK,EAAE,QADU;AAEjBC,IAAAA,OAAO,EAAEZ,KAAK,CAACY,OAAN,IAAiB;AAFT,GAAnB;;AAIA,SAAOX,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAjCD;eAmCelB,O","sourcesContent":["import axios from 'axios'\nimport { Notification, MessageBox } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n// 创建Axios实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  timeout: 5000\n})\n\nservice.interceptors.request.use(config => {\n// Do something before request is sent\n  config.headers['X-Requested-With'] = 'XMLHttpRequest'\n  config.headers['Cache-Control'] = 'no-cache' // 解决 类似360浏览器Ajax缓存问题\n  config.headers.Pragma = 'no-cache'\n  if (store.getters.token) {\n    config.headers.Authorization = getToken()\n  }\n  return config\n}, error => {\n// Do something with request error\n  return Promise.reject(error)\n})\n\nservice.interceptors.response.use(response => {\n  // Do something before response is sent\n  const headers = response.headers\n  const res = response.data\n  if (headers.authorization && headers.authorization.length > 0) {\n    store.dispatch('user/reloadToken', headers.authorization)\n  }\n  if (res.code !== 200) {\n    Notification.error({\n      title: '服务请求异常',\n      message: res.message || 'Error'\n    })\n    if (res.code === 401 || res.code === 403) {\n      MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n        confirmButtonText: '重新登录',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        store.dispatch('user/resetToken').then(() => {\n          location.reload()\n        })\n      })\n    } else {\n      return Promise.reject(new Error(res.message || 'Error'))\n    }\n  }\n  return res\n}, error => {\n  Notification.error({\n    title: '服务请求异常',\n    message: error.message || 'Error'\n  })\n  return Promise.reject(error)\n})\n\nexport default service\n"]}]}